L.Polycol=L.Polygon.extend({_originalInitialize:L.Polygon.prototype.initialize,initialize:function(o,i){this._originalInitialize(o,i)},_updatePath:function(){"object"==typeof this.options.fill&&"data"in this.options.fill?this._renderer._updatePolycol(this,!0):this._renderer._updatePoly(this,!0)}}),L.polycol=function(o,i){return new L.Polycol(o,i)},L.Canvas.include({_updatePolycol:function(o,i){if(this._drawing){var t,l,a,n,e=o._parts,r=e.length,s=this._ctx;if(r){for(s.beginPath(),t=0;t<r;t++){for(l=0,a=e[t].length;l<a;l++)n=e[t][l],s[l?"lineTo":"moveTo"](n.x,n.y);i&&s.closePath()}this._fillStrokePolycol(s,o)}}},_fillStrokePolycol:function(o,i){var t=i.options;t.fill&&this._polycol(o,i,t.fill),t.stroke&&0!==t.weight&&(o.setLineDash&&o.setLineDash(i.options&&i.options._dashArray||[]),o.globalAlpha=t.opacity,o.lineWidth=t.weight,o.strokeStyle=t.color,o.lineCap=t.lineCap,o.lineJoin=t.lineJoin,o.stroke())},_polycol:function(o,i,t){var l=i._pxBounds||this.__polycolBounds;this.__polycolBounds=l;var a=t||this.__polycolFillData;this.__polycolFillData=a;var n=this.__clamp(a.padding,0,100)||1,e=a.noDataColor||"rgb(50,50,50)",r=a.orientation||"vertical";n=.1*n/100;var s,c=(l.max.x-l.min.x)/2,p=(l.max.y-l.min.y)/2;s="horizontal"==r?o.createLinearGradient(l.min.x,l.min.y+p,l.max.x,l.max.y-p):o.createLinearGradient(l.min.x+c,l.min.y,l.max.x-c,l.max.y);for(var h=0,d=0;d<a.data.length;d++){var y=Object.keys(a.data[d])[0],_=Object.values(a.data[d])[0];h>1||h+_/100>1||(s.addColorStop(h+n,y),s.addColorStop(h+_/100,y),h=_/100+h)}h<1&&(s.addColorStop(h+n,e),s.addColorStop(1,e)),o.fillStyle=s,o.fill(i.options.fillRule)},__clamp:function(o,i,t){return Math.min(Math.max(o,i),t)}});