L.Polycol=L.Polygon.extend({_originalInitialize:L.Polygon.prototype.initialize,initialize:function(i,o){this._originalInitialize(i,o)},_updatePath:function(){"object"==typeof this.options.fill&&"data"in this.options.fill?this._renderer._updatePolycol(this,!0):this._renderer._updatePoly(this,!0)}}),L.polycol=function(i,o){return new L.Polycol(i,o)},L.Canvas.include({_updatePolycol:function(i,o){if(this._drawing){var t,l,a,n,e=i._parts,r=e.length,s=this._ctx;if(r){for(s.beginPath(),t=0;t<r;t++){for(l=0,a=e[t].length;l<a;l++)n=e[t][l],s[l?"lineTo":"moveTo"](n.x,n.y);o&&s.closePath()}this._fillStrokePolycol(s,i)}}},_fillStrokePolycol:function(i,o){var t=o.options;t.fill&&this._polycol(i,o,t.fill),t.stroke&&0!==t.weight&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=t.opacity,i.lineWidth=t.weight,i.strokeStyle=t.color,i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.stroke())},_polycol:function(i,o,t){var l=o._pxBounds||this.__polycolBounds;this.__polycolBounds=l;var a=t||this.__polycolFillData;this.__polycolFillData=a;var n=this.__clamp(a.padding,0,100)||1,e=a.noDataColor||"rgb(50,50,50)",r=a.orientation||"vertical";n=.1*n/100;var s,p=(l.max.x-l.min.x)/2,c=(l.max.y-l.min.y)/2;s="horizontal"==r?i.createLinearGradient(l.min.x,l.min.y+c,l.max.x,l.max.y-c):i.createLinearGradient(l.min.x+p,l.min.y,l.max.x-p,l.max.y);for(var h,_=0,d=0;d<a.data.length;d++){var y=Object.keys(a.data[d])[0],f=Object.values(a.data[d])[0],m=parseFloat((f/100).toFixed(2))-n;m=this.__clamp(m,0,1),_=this.__clamp(_,0,1),h=this.__clamp(_+m,0,1),s.addColorStop(_,y),s.addColorStop(h,y),_=h+n}_<1&&(s.addColorStop(_,e),s.addColorStop(1,e)),i.fillStyle=s,i.fill(o.options.fillRule)},__clamp:function(i,o,t){return Math.min(Math.max(i,o),t)}});